import{p as V}from"./pickBy.fafad78c.js";import{t as C}from"./throttle.5ddb6dea.js";import{S as j,m as M}from"./SearchFilter.04399af9.js";import{L as P}from"./Layout.7cfde331.js";import{M as S}from"./Modal.13d78bfa.js";import{T}from"./TextInput.52b29758.js";import{P as $}from"./Pagination.9039555a.js";import N from"./Show.1fe50b8e.js";import{_ as U,r,o as i,c as m,a as e,t as o,b as n,e as f,F as B,j as I,d as u,h,f as b}from"./app.be70addd.js";import"./debounce.382cac71.js";import"./Dropdown.838ec547.js";import"./FlashMessages.58fb813e.js";import"./InputError.8ccdc6e5.js";import"./SmsDialog.9afe5dfe.js";import"./LoadingButton.5bbbf3d3.js";import"./TextareaInput.1d17a2de.js";const L={layout:P,components:{Pagination:$,SearchFilter:j,Modal:S,TextInput:T,ShowPayment:N},props:{payments:Object,filters:Object,message:String},metaInfo(){return{title:this.$tc("Payment",2)}},data(){return{form:{search:this.filters.search,gateway:this.filters.gateway,trashed:this.filters.trashed,received:this.filters.received},gateways:[],payment:null,viewModal:!1}},watch:{form:{handler:C(function(){let t=V(this.form);this.$inertia.replace(this.route("payments",Object.keys(t).length?t:{remember:"forget"}))},250),deep:!0}},created(){this.gateways=this.$page.props.user.account.gateways.split(",").map(t=>({value:t,label:t})),this.gateways.unshift({value:"",label:this.$t("All")})},methods:{rowClicked(t){fetch(this.route("payments.ajax",t)).then(l=>{l.json().then(d=>{this.payment=d,this.viewModal=!0})})},reset(){this.form=M(this.form,()=>null)}}},D={class:"mb-6 mt-2 font-bold text-lg md:text-2xl"},O={class:"np mb-6 flex justify-between items-center"},A={class:"block text-gray-700"},F={class:"mt-4 block text-gray-700"},R={class:"mt-4 block text-gray-700"},E={class:"mt-4 block text-gray-700"},q={class:"mt-4 block text-gray-700"},G={class:"inline md:hidden"},W={class:"hidden md:inline"},z={class:"bg-white rounded shadow leading-normal overflow-x-auto scroll-on-light"},H={class:"w-full whitespace-no-wrap"},J={class:"text-left font-bold"},K={class:"px-6 pt-6 pb-4"},Q={class:"px-6 pt-6 pb-4"},X={class:"px-6 pt-6 pb-4 text-center"},Y={class:"px-6 pt-6 pb-4",colspan:"2"},Z=["onClick"],ee={class:"border-t px-6 py-4"},te={class:"flex items-center"},se=e("br",null,null,-1),oe={class:"border-t px-6 py-4"},le={key:0},ae={class:"border-t px-6 py-4"},ne={class:"flex items-center justify-between"},re={class:"ltr:mr-2 rtl:ml-2"},ie={class:"text-right font-bold flex items-center justify-end"},de={class:"border-t px-6 py-4 max-w-lg truncate"},me={class:"border-t px-6 py-4 w-8"},ce={key:0},ue={class:"border-t px-6 py-4",colspan:"5"};function he(t,l,d,pe,a,_){const p=r("v-select"),y=r("text-input"),w=r("search-filter"),c=r("Icons"),v=r("Link"),g=r("pagination"),k=r("ShowPayment"),x=r("Modal");return i(),m("div",null,[e("div",null,[e("h1",D,o(t.$tc("Payment",2)),1),e("div",O,[n(w,{modelValue:a.form.search,"onUpdate:modelValue":l[5]||(l[5]=s=>a.form.search=s),class:"w-full max-w-md ltr:mr-4 rtl:ml-4",onReset:_.reset},{default:f(()=>[e("label",A,o(t.$t("Status")),1),n(p,{modelValue:a.form.received,"onUpdate:modelValue":l[0]||(l[0]=s=>a.form.received=s),options:[{value:"",label:"All"},{value:"yes",label:t.$t("Received")},{value:"no",label:t.$t("Not received yet")}],reduce:s=>s.value},null,8,["modelValue","options","reduce"]),e("label",F,o(t.$t("Start Date")),1),n(y,{type:"date",modelValue:a.form.start_date,"onUpdate:modelValue":l[1]||(l[1]=s=>a.form.start_date=s),pattern:"\\d{4}-\\d{2}-\\d{2}",class:"mt-1 w-full"},null,8,["modelValue"]),e("label",R,o(t.$t("End Date")),1),n(y,{type:"date",modelValue:a.form.end_date,"onUpdate:modelValue":l[2]||(l[2]=s=>a.form.end_date=s),pattern:"\\d{4}-\\d{2}-\\d{2}",class:"mt-1 w-full"},null,8,["modelValue"]),e("label",E,o(t.$t("Gateway")),1),n(p,{options:a.gateways,modelValue:a.form.gateway,"onUpdate:modelValue":l[3]||(l[3]=s=>a.form.gateway=s),reduce:s=>s.value},null,8,["options","modelValue","reduce"]),e("label",q,o(t.$t("Trashed")),1),n(p,{modelValue:a.form.trashed,"onUpdate:modelValue":l[4]||(l[4]=s=>a.form.trashed=s),options:[{value:"",label:"Not Trashed"},{value:"with",label:t.$t("With Trashed")},{value:"only",label:t.$t("Only Trashed")}],reduce:s=>s.value},null,8,["modelValue","options","reduce"])]),_:1},8,["modelValue","onReset"]),n(v,{class:"btn-gray",href:t.route("payments.new")},{default:f(()=>[e("span",G,[n(c,{name:"add",class:"w-4 h-4 text-white group-hover:text-white fill-white"})]),e("span",W,o(t.$t("create_x",{x:t.$tc("Payment")})),1)]),_:1},8,["href"])]),e("div",z,[e("table",H,[e("thead",null,[e("tr",J,[e("th",K,o(t.$t("Created at")),1),e("th",Q,o(t.$t("Customer")),1),e("th",X,o(t.$t("Amount")),1),e("th",Y,o(t.$t("Description")),1)])]),e("tbody",null,[(i(!0),m(B,null,I(d.payments.data,s=>(i(),m("tr",{key:s.id,onClick:fe=>_.rowClicked(s.id),class:"cursor-pointer hover:bg-teal-200 focus-within:bg-teal-200"},[e("td",ee,[e("div",te,[h(o(t.$date(s.date))+" ",1),s.deleted_at?(i(),b(c,{key:0,name:"trash",class:"flex-shrink-0 w-3 h-3 fill-gray-400 ml-2"})):u("",!0),se,h(" "+o(t.$reference(s.reference)),1)])]),e("td",oe,[s.customer?(i(),m("div",le,[h(o(s.customer.name)+" ",1),e("div",null,o(s.customer.phone),1)])):u("",!0)]),e("td",ae,[e("div",ne,[e("div",re,o(s.gateway),1),e("div",ie,[s.received?(i(),b(c,{key:0,name:"check",class:"flex-shrink-0 w-3 h-3 fill-green-600 ltr:mr-2 rtl:ml-2"})):u("",!0),h(" "+o(t.$number(s.amount)),1)])])]),e("td",de,o(s.description),1),e("td",me,[n(c,{name:"cheveron-right",class:"block w-6 h-6 fill-gray-400 rtl:rotate"})])],8,Z))),128)),d.payments.data.length===0?(i(),m("tr",ce,[e("td",ue,o(t.$t("no_x_found",{x:t.$tc("Payment")})),1)])):u("",!0)])])]),n(g,{links:d.payments.links,meta:d.payments.meta},null,8,["links","meta"])]),n(x,{show:a.viewModal,"max-width":"2xl",closeable:!0,onClose:l[7]||(l[7]=()=>a.viewModal=!1)},{default:f(()=>[n(k,{payment:a.payment,onClose:l[6]||(l[6]=()=>a.viewModal=!1)},null,8,["payment"])]),_:1},8,["show"])])}const Ne=U(L,[["render",he]]);export{Ne as default};
